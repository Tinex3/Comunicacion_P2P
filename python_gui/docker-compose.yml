# version: '3.8'  # Obsoleto en Docker Compose v2+

services:
  lora-chat-web:
    build: .
    container_name: lora-p2p-chat
    ports:
      - "8000:8000"
    # OPCIÓN 1: Mapear dispositivos específicos (comenta los que no existen)
    # devices:
    #   - /dev/ttyUSB0:/dev/ttyUSB0
    #   - /dev/ttyACM0:/dev/ttyACM0
    
    # OPCIÓN 2: Modo privilegiado (acceso a TODOS los dispositivos automáticamente)
    privileged: true
    volumes:
      - /dev:/dev
    environment:
      - PYTHONUNBUFFERED=1
    # volumes ya definidos arriba para /dev, aquí solo código
    # volumes:
    #   - ./web_server.py:/app/web_server.py
    #   - ./serial_comm.py:/app/serial_comm.py
    #   - ./static:/app/static
    restart: unless-stopped
    networks:
      - lora-network

networks:
  lora-network:
    driver: bridge
